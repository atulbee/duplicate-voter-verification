module.exports=[96322,a=>{"use strict";var b=a.i(87924),c=a.i(72131);function d(){let[a,d]=(0,c.useState)({firstName:"",middleName:"",lastName:"",wardDivNo:"",epicNumber:"",voterSerialNo:"",sex:"",ageMin:"",ageMax:"",duplicateFlag:"",verified:"",sortBy:"SR_NO",sortDir:"ASC",pageNumber:1,pageSize:50}),[e,f]=(0,c.useState)(null),[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)(null),k=async()=>{h(!0),j(null);try{let b={sortBy:a.sortBy,sortDir:a.sortDir,pageNumber:a.pageNumber,pageSize:a.pageSize};a.firstName.trim()&&(b.firstName=a.firstName.trim()),a.middleName.trim()&&(b.middleName=a.middleName.trim()),a.lastName.trim()&&(b.lastName=a.lastName.trim()),a.wardDivNo.trim()&&(b.wardDivNo=a.wardDivNo.trim()),a.epicNumber.trim()&&(b.epicNumber=a.epicNumber.trim()),a.voterSerialNo.trim()&&(b.voterSerialNo=a.voterSerialNo.trim()),a.sex&&(b.sex=a.sex),a.ageMin&&(b.ageMin=parseInt(a.ageMin)),a.ageMax&&(b.ageMax=parseInt(a.ageMax)),a.duplicateFlag&&(b.duplicateFlag=a.duplicateFlag),a.verified&&(b.verified=a.verified);let c=await fetch("/api/voters/report",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(!c.ok)throw Error("Failed");f(await c.json())}catch(a){j(a.message||"Error occurred"),f(null)}finally{h(!1)}},l=a=>{d(b=>({...b,sortBy:a,sortDir:b.sortBy===a&&"ASC"===b.sortDir?"DESC":"ASC",pageNumber:1})),setTimeout(()=>k(),0)},m=({column:c})=>a.sortBy!==c?(0,b.jsx)("span",{className:"ml-1 text-gray-400",children:"⇅"}):"ASC"===a.sortDir?(0,b.jsx)("span",{className:"ml-1",children:"↑"}):(0,b.jsx)("span",{className:"ml-1",children:"↓"});return(0,b.jsxs)("div",{className:"space-y-6 max-w-[1600px] mx-auto p-4",children:[(0,b.jsx)("div",{className:"bg-white rounded-2xl p-6 border border-gray-200 shadow-sm",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-14 h-14 rounded-xl bg-linear-to-br from-indigo-500 to-purple-600 flex items-center justify-center shadow-xl shrink-0",children:(0,b.jsx)("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"मतदार अहवाल"}),(0,b.jsx)("p",{className:"text-gray-600 mt-1",children:"Comprehensive Voter Report"})]})]})}),(0,b.jsxs)("div",{className:"bg-white rounded-2xl p-6 border border-gray-200 shadow-sm",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Filters"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[(0,b.jsx)("input",{type:"text",placeholder:"First Name",value:a.firstName,onChange:a=>d(b=>({...b,firstName:a.target.value})),className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg text-gray-900"}),(0,b.jsx)("input",{type:"text",placeholder:"Middle Name",value:a.middleName,onChange:a=>d(b=>({...b,middleName:a.target.value})),className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg text-gray-900"}),(0,b.jsx)("input",{type:"text",placeholder:"Last Name",value:a.lastName,onChange:a=>d(b=>({...b,lastName:a.target.value})),className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg text-gray-900"}),(0,b.jsx)("input",{type:"text",placeholder:"Ward/Div No",value:a.wardDivNo,onChange:a=>d(b=>({...b,wardDivNo:a.target.value})),className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg text-gray-900"}),(0,b.jsx)("input",{type:"text",placeholder:"EPIC Number",value:a.epicNumber,onChange:a=>d(b=>({...b,epicNumber:a.target.value})),className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg text-gray-900"}),(0,b.jsx)("input",{type:"text",placeholder:"Serial No",value:a.voterSerialNo,onChange:a=>d(b=>({...b,voterSerialNo:a.target.value})),className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg text-gray-900"}),(0,b.jsxs)("select",{value:a.sex,onChange:a=>d(b=>({...b,sex:a.target.value})),className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg text-gray-900",children:[(0,b.jsx)("option",{value:"",children:"All Sex"}),(0,b.jsx)("option",{value:"M",children:"Male"}),(0,b.jsx)("option",{value:"F",children:"Female"}),(0,b.jsx)("option",{value:"O",children:"Other"})]}),(0,b.jsx)("input",{type:"number",placeholder:"Min Age",value:a.ageMin,onChange:a=>d(b=>({...b,ageMin:a.target.value})),className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg text-gray-900"}),(0,b.jsx)("input",{type:"number",placeholder:"Max Age",value:a.ageMax,onChange:a=>d(b=>({...b,ageMax:a.target.value})),className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg text-gray-900"}),(0,b.jsxs)("select",{value:a.duplicateFlag,onChange:a=>d(b=>({...b,duplicateFlag:a.target.value})),className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg text-gray-900",children:[(0,b.jsx)("option",{value:"",children:"All Duplicate"}),(0,b.jsx)("option",{value:"TRUE",children:"Duplicate"}),(0,b.jsx)("option",{value:"FALSE",children:"Not Duplicate"}),(0,b.jsx)("option",{value:"UNKNOWN",children:"Unknown"})]}),(0,b.jsxs)("select",{value:a.verified,onChange:a=>d(b=>({...b,verified:a.target.value})),className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg text-gray-900",children:[(0,b.jsx)("option",{value:"",children:"All Verified"}),(0,b.jsx)("option",{value:"TRUE",children:"Verified"}),(0,b.jsx)("option",{value:"FALSE",children:"Unverified"})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,b.jsx)("button",{onClick:k,disabled:g,className:"px-6 py-3 bg-linear-to-r from-indigo-600 to-purple-600 text-white rounded-lg font-semibold shadow-lg disabled:opacity-50",children:g?"Generating...":"Generate Report"}),(0,b.jsx)("button",{onClick:()=>{d({firstName:"",middleName:"",lastName:"",wardDivNo:"",epicNumber:"",voterSerialNo:"",sex:"",ageMin:"",ageMax:"",duplicateFlag:"",verified:"",sortBy:"SR_NO",sortDir:"ASC",pageNumber:1,pageSize:50}),f(null),j(null)},className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg font-semibold",children:"Clear"}),e?.voters?.length>0&&(0,b.jsx)("button",{onClick:()=>{if(!e?.voters?.length)return;let a=["Sr No,Ward/Div,First,Middle,Last,Age,Sex,EPIC,House,Duplicate,Verified,Dup ID",...e.voters.map(a=>[a.srNo,a.wardDivNo,a.firstName,a.middleName||"",a.lastName,a.age,a.sex,a.epicNumber,a.houseNo||"",a.duplicateFlag,a.verified,a.duplicationId||""].map(a=>`"${String(a).replace(/"/g,'""')}"`).join(","))].join("\n"),b=document.createElement("a");b.href=URL.createObjectURL(new Blob([a],{type:"text/csv"})),b.download=`report-${new Date().toISOString().split("T")[0]}.csv`,b.click()},className:"px-6 py-3 bg-linear-to-r from-green-600 to-emerald-600 text-white rounded-lg font-semibold shadow-lg",children:"Export CSV"})]})]}),i&&(0,b.jsx)("div",{className:"bg-red-50 border border-red-300 rounded-xl p-4 text-red-700",children:i}),e&&(0,b.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden",children:[(0,b.jsxs)("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Results"}),(0,b.jsxs)("p",{className:"text-gray-600",children:["Total: ",e?.totalRecords||0," | Page ",e?.pageNumber||1,"/",e?.totalPages||1]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>{a.pageNumber>1&&(d(a=>({...a,pageNumber:a.pageNumber-1})),k())},disabled:1===a.pageNumber,className:"px-4 py-2 bg-gray-200 rounded-lg disabled:opacity-50",children:"Prev"}),(0,b.jsx)("button",{onClick:()=>{a.pageNumber<(e?.totalPages||1)&&(d(a=>({...a,pageNumber:a.pageNumber+1})),k())},disabled:a.pageNumber>=(e?.totalPages||1),className:"px-4 py-2 bg-gray-200 rounded-lg disabled:opacity-50",children:"Next"})]})]}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full border-collapse",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"bg-linear-to-r from-gray-50 to-gray-100 border-b-2 border-gray-300",children:[(0,b.jsx)("th",{onClick:()=>l("SR_NO"),className:"px-4 py-4 text-left text-sm font-bold text-gray-800 border-r cursor-pointer hover:bg-gray-200 transition-colors",children:(0,b.jsxs)("div",{className:"flex items-center",children:["Sr No",(0,b.jsx)(m,{column:"SR_NO"})]})}),(0,b.jsx)("th",{onClick:()=>l("WARD_DIV_NO"),className:"px-4 py-4 text-left text-sm font-bold text-gray-800 border-r cursor-pointer hover:bg-gray-200 transition-colors",children:(0,b.jsxs)("div",{className:"flex items-center",children:["Ward/Div",(0,b.jsx)(m,{column:"WARD_DIV_NO"})]})}),(0,b.jsx)("th",{onClick:()=>l("FIRST_NAME"),className:"px-4 py-4 text-left text-sm font-bold text-gray-800 border-r cursor-pointer hover:bg-gray-200 transition-colors",children:(0,b.jsxs)("div",{className:"flex items-center",children:["First Name",(0,b.jsx)(m,{column:"FIRST_NAME"})]})}),(0,b.jsx)("th",{onClick:()=>l("MIDDLE_NAME"),className:"px-4 py-4 text-left text-sm font-bold text-gray-800 border-r cursor-pointer hover:bg-gray-200 transition-colors",children:(0,b.jsxs)("div",{className:"flex items-center",children:["Middle",(0,b.jsx)(m,{column:"MIDDLE_NAME"})]})}),(0,b.jsx)("th",{onClick:()=>l("LAST_NAME"),className:"px-4 py-4 text-left text-sm font-bold text-gray-800 border-r cursor-pointer hover:bg-gray-200 transition-colors",children:(0,b.jsxs)("div",{className:"flex items-center",children:["Last Name",(0,b.jsx)(m,{column:"LAST_NAME"})]})}),(0,b.jsx)("th",{onClick:()=>l("AGE"),className:"px-4 py-4 text-left text-sm font-bold text-gray-800 border-r cursor-pointer hover:bg-gray-200 transition-colors",children:(0,b.jsxs)("div",{className:"flex items-center",children:["Age",(0,b.jsx)(m,{column:"AGE"})]})}),(0,b.jsx)("th",{onClick:()=>l("SEX"),className:"px-4 py-4 text-left text-sm font-bold text-gray-800 border-r cursor-pointer hover:bg-gray-200 transition-colors",children:(0,b.jsxs)("div",{className:"flex items-center",children:["Sex",(0,b.jsx)(m,{column:"SEX"})]})}),(0,b.jsx)("th",{onClick:()=>l("EPIC_NUMBER"),className:"px-4 py-4 text-left text-sm font-bold text-gray-800 border-r cursor-pointer hover:bg-gray-200 transition-colors",children:(0,b.jsxs)("div",{className:"flex items-center",children:["EPIC",(0,b.jsx)(m,{column:"EPIC_NUMBER"})]})}),(0,b.jsx)("th",{onClick:()=>l("DUPLICATE_FLAG"),className:"px-4 py-4 text-left text-sm font-bold text-gray-800 border-r cursor-pointer hover:bg-gray-200 transition-colors",children:(0,b.jsxs)("div",{className:"flex items-center",children:["Duplicate",(0,b.jsx)(m,{column:"DUPLICATE_FLAG"})]})}),(0,b.jsx)("th",{onClick:()=>l("VERIFIED"),className:"px-4 py-4 text-left text-sm font-bold text-gray-800 cursor-pointer hover:bg-gray-200 transition-colors",children:(0,b.jsxs)("div",{className:"flex items-center",children:["Verified",(0,b.jsx)(m,{column:"VERIFIED"})]})})]})}),(0,b.jsx)("tbody",{children:e?.voters?.map((a,c)=>(0,b.jsxs)("tr",{className:`border-b ${c%2==0?"bg-gray-50":"bg-white"}`,children:[(0,b.jsx)("td",{className:"px-4 py-3 text-sm font-medium text-gray-900 border-r",children:a.srNo}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700 border-r",children:a.wardDivNo}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900 font-medium border-r",children:a.firstName}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700 border-r",children:a.middleName||"-"}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900 font-medium border-r",children:a.lastName}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700 border-r",children:a.age}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700 border-r",children:a.sex}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700 font-mono border-r",children:a.epicNumber}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm border-r",children:(0,b.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${"TRUE"===a.duplicateFlag?"bg-red-100 text-red-800 ":"FALSE"===a.duplicateFlag?"bg-green-100 text-green-800 ":"bg-gray-100 text-gray-800 "}`,children:a.duplicateFlag})}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm",children:(0,b.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${"TRUE"===a.verified?"bg-green-100 text-green-800 ":"bg-amber-100 text-amber-800 "}`,children:a.verified})})]},a.srNo))})]})})]})]})}a.s(["default",()=>d])}];

//# sourceMappingURL=src_app_%28reports%29_reports_page_tsx_9a5cb491._.js.map