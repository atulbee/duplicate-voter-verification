module.exports=[13016,a=>{"use strict";var b=a.i(87924),c=a.i(72131);async function d(a,b,c){console.log(`[API Client] ${a} ${b}`,c?{body:c}:"");let d=c?JSON.stringify(c):"",e={"Content-Type":"application/json"};console.log("[API Client] Fetch options:",{method:a,path:b,headers:e,hasBody:!!d});let f=await fetch(b,{method:a,headers:e,body:d||void 0,cache:"no-store"});if(console.log(`[API Client] Response status: ${f.status} ${f.statusText}`),console.log("[API Client] Full response object:",f),console.log("[API Client] Response headers:",Object.fromEntries(f.headers.entries())),!f.ok){let c=await f.text();throw console.error("[API Client] Error response:",c),Error(`API ${a} ${b} failed: ${f.status} ${c}`)}let g=await f.json();if(console.log("[API Client] Response data:",g),console.log("[API Client] Response data (stringified):",JSON.stringify(g,null,2)),g&&"object"==typeof g&&(console.log("[API Client] Checking for .NET ApiResponse structure..."),"success"in g||"Success"in g)){let a=g.success??g.Success;if(console.log("[API Client] .NET ApiResponse detected, Success:",a),!a){let a=g.message??g.Message??"API request failed",b=g.errorCode??g.ErrorCode??"UNKNOWN_ERROR";throw console.error("[API Client] .NET API returned failure:",{message:a,errorCode:b}),Error(`${a} (${b})`)}let b=g.data??g.Data;return console.log("[API Client] Extracted data from .NET ApiResponse:",b),b}return g}function e({records:a,verifiedSrNos:d,onSelectChange:e}){console.log("[DuplicateTable] Component rendered with:",{recordCount:a.length,verifiedCount:d.size,verifiedSrNos:Array.from(d)});let[f,g]=(0,c.useState)([]),[h,i]=(0,c.useState)(null);(0,c.useEffect)(()=>{e(f)},[f]);let j=(0,c.useMemo)(()=>{if(console.log("[DuplicateTable] Calculating duplicate columns..."),!a||a.length<2)return console.log("[DuplicateTable] Not enough records for duplicate detection"),new Set;let b=new Set;for(let c of Object.keys(a[0]||{}))1===new Set(a.map(a=>String(a[c]??""))).size&&b.add(c);return console.log("[DuplicateTable] Duplicate columns identified:",Array.from(b)),b},[a]),k=(0,c.useMemo)(()=>h?[...a].sort((a,b)=>{let c=a[h.key],d=b[h.key];if(null==c&&null==d)return 0;if(null==c)return 1;if(null==d)return -1;if("number"==typeof c&&"number"==typeof d)return"asc"===h.direction?c-d:d-c;let e=String(c).toLowerCase(),f=String(d).toLowerCase();return"asc"===h.direction?e<f?-1:+(e>f):e>f?-1:+(e<f)}):a,[a,h]),l=(0,c.useMemo)(()=>0===a.length?[]:Object.keys(a[0]).filter(a=>"isVerified"!==a),[a]);return(0,b.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 overflow-hidden shadow-sm",children:[(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full border-collapse",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b-2 border-gray-300 bg-linear-to-r from-gray-50 to-gray-100",children:[(0,b.jsx)("th",{className:"px-4 py-4 text-left text-xs font-bold text-gray-800 uppercase tracking-wider sticky left-0 bg-gray-50 backdrop-blur-sm z-10 border-r border-gray-200",children:"स्थिती"}),(0,b.jsx)("th",{className:"px-4 py-4 text-left text-xs font-bold text-gray-800 uppercase tracking-wider border-r border-gray-200",children:"निवडा"}),l.map(a=>(0,b.jsx)("th",{className:`px-4 py-4 text-left text-xs font-bold uppercase tracking-wider whitespace-nowrap cursor-pointer transition-all group border-r border-gray-200 ${j.has(a)?"bg-amber-50 text-amber-900":"text-gray-800 hover:bg-gray-100"}`,onClick:()=>{i(b=>b?.key===a?"asc"===b.direction?{key:a,direction:"desc"}:null:{key:a,direction:"asc"})},children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"font-semibold",children:a}),j.has(a)&&(0,b.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-md text-xs font-bold bg-amber-200 text-amber-900 border border-amber-400 shadow-sm",children:"DUPLICATE"}),(0,b.jsx)("span",{className:"ml-auto opacity-50 group-hover:opacity-100 transition-opacity",children:h?.key===a?"asc"===h.direction?(0,b.jsx)("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}):(0,b.jsx)("svg",{className:"w-4 h-4 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):(0,b.jsx)("svg",{className:"w-4 h-4 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})})})]})},a))]})}),(0,b.jsx)("tbody",{children:k.map((a,c)=>{let e=a.srNo??a.SrNo??0,h=d.has(e),i=f.includes(e);return(0,b.jsxs)("tr",{className:`transition-all border-b border-gray-200 ${i?"bg-green-50":"hover:bg-gray-50"}`,children:[(0,b.jsx)("td",{className:"px-4 py-4 sticky left-0 bg-white backdrop-blur-sm z-10 border-r border-gray-200",children:h?(0,b.jsx)("span",{className:"inline-flex items-center px-3 py-1.5 rounded-lg text-xs font-bold bg-green-100 text-green-700 border border-green-300 shadow-sm",children:"✓ सत्यापित"}):(0,b.jsx)("span",{className:"inline-flex items-center px-3 py-1.5 rounded-lg text-xs font-bold bg-orange-100 text-orange-700 border border-orange-300 shadow-sm",children:"⚠ असत्यापित"})}),(0,b.jsx)("td",{className:"px-4 py-4 border-r border-gray-200",children:(0,b.jsx)("label",{className:"flex items-center cursor-pointer",children:(0,b.jsx)("input",{type:"checkbox",disabled:h,checked:i,onChange:()=>{(console.log("[DuplicateTable] toggle() called for srNo:",e),d.has(e))?console.log("[DuplicateTable] SrNo is verified, toggle blocked"):g(a=>{let b=a.includes(e)?a.filter(a=>a!==e):[...a,e];return console.log("[DuplicateTable] Selection updated from",a,"to",b),b})},className:"w-5 h-5 rounded border-2 border-gray-300 bg-white text-green-600 focus:ring-2 focus:ring-green-500/30 focus:ring-offset-0 disabled:opacity-40 disabled:cursor-not-allowed transition-all"})})}),l.map(c=>(0,b.jsx)("td",{className:`px-4 py-4 text-sm font-medium whitespace-nowrap border-r border-gray-200 ${j.has(c)?"bg-amber-100 text-amber-900 font-bold":"text-gray-900"}`,children:String(a[c]??"-")},c))]},String(e??c))})})]})}),(0,b.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsxs)("span",{className:"text-gray-600",children:["Showing ",(0,b.jsx)("span",{className:"font-bold text-gray-900",children:a.length})," record",1!==a.length?"s":""]}),f.length>0&&(0,b.jsxs)("span",{className:"text-gray-600",children:[(0,b.jsx)("span",{className:"font-bold text-green-600",children:f.length})," selected"]})]})})]})}function f({label:a="Loading..."}){return(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-zinc-500",role:"status","aria-live":"polite",children:[(0,b.jsx)("span",{className:"inline-block animate-spin rounded-full border-2 border-current border-r-transparent h-4 w-4"}),(0,b.jsx)("span",{children:a})]})}function g({message:a,type:d="info"}){let[e,f]=(0,c.useState)(!0);return((0,c.useEffect)(()=>{let a=setTimeout(()=>f(!1),3e3);return()=>clearTimeout(a)},[]),e)?(0,b.jsx)("div",{className:`fixed bottom-4 right-4 text-white px-3 py-2 rounded ${"success"===d?"bg-green-600":"error"===d?"bg-red-600":"bg-zinc-800"} shadow`,children:a}):null}function h(){console.log("[VerifyPage] Component mounted/rendered");let[a,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)({firstName:"",middleName:"",lastName:""}),[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)(new Set),[o,p]=(0,c.useState)([]),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(!1);async function u(){console.log("[VerifyPage] search() called with query:",i),h(!0),console.log("[VerifyPage] Loading state set to true");try{let a;console.log("[VerifyPage] Calling API findDuplicates...");let b=await (a={firstName:i.firstName,middleName:i.middleName,lastName:i.lastName},d("POST","/api/voters/find-duplicates",a));console.log("[VerifyPage] API response received:",b);let c=Array.isArray(b?.records)?b.records:Array.isArray(b)?b:Array.isArray(b?.data)?b.data:Array.isArray(b?.result)?b.result:[];console.log("[VerifyPage] Extracted records list:",c.length,"items"),l(c),console.log("[VerifyPage] Records state updated");let e=new Set(b?.verifiedSrNos||[]);console.log("[VerifyPage] Verified SrNos:",Array.from(e)),n(e),p([]),console.log("[VerifyPage] Selected state cleared"),t(!0),console.log("[VerifyPage] Search completed successfully")}catch(a){console.error("[VerifyPage] Search error:",a),r({message:a.message||"Search failed",type:"error"}),t(!0)}finally{h(!1),console.log("[VerifyPage] Loading state set to false")}}async function v(a){if(console.log("[VerifyPage] mark() called with isDuplicate:",a,"selected:",o),0===o.length)return void console.log("[VerifyPage] No records selected, aborting mark operation");h(!0),console.log("[VerifyPage] Loading state set to true");try{let b,c={srNoArray:o,isDuplicate:a,remarks:a?"Same person":"Different persons"};console.log("[VerifyPage] Calling API markDuplicates with payload:",c),await (b=c,d("POST","/api/voters/mark-duplicates",b)),console.log("[VerifyPage] Mark duplicates API call successful"),r({message:"Saved successfully",type:"success"}),console.log("[VerifyPage] Success toast shown"),console.log("[VerifyPage] Refreshing search results..."),await u()}catch(a){console.error("[VerifyPage] Mark error:",a),r({message:a.message||"Save failed",type:"error"})}finally{h(!1),console.log("[VerifyPage] Loading state set to false")}}return(0,c.useEffect)(()=>{console.log("[VerifyPage] useEffect: Fetching unverified count on mount"),d("GET","/api/voters/unverified-count").then(a=>{console.log("[VerifyPage] Unverified count fetched:",a)}).catch(a=>{console.error("[VerifyPage] Failed to fetch unverified count:",a)})},[]),(0,b.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,b.jsx)("div",{className:"bg-white rounded-2xl p-5 sm:p-6 border border-gray-200 shadow-sm",children:(0,b.jsxs)("div",{className:"flex items-center gap-3 sm:gap-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-xl bg-linear-to-br from-blue-500 to-cyan-600 flex items-center justify-center shadow-lg shadow-blue-500/25 shrink-0",children:(0,b.jsx)("svg",{className:"w-6 h-6 sm:w-7 sm:h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl sm:text-3xl font-bold text-gray-900",children:"डुप्लिकेट शोधा"}),(0,b.jsx)("p",{className:"text-sm sm:text-base text-gray-600 mt-1",children:"मतदार डेटा शोधा आणि सत्यापित करा"})]})]})}),(0,b.jsxs)("div",{className:"bg-white rounded-2xl p-5 sm:p-6 border border-gray-200 shadow-sm",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-5",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("label",{className:"text-sm font-bold text-gray-900 flex items-center gap-2",children:[(0,b.jsx)("span",{className:"w-2 h-2 rounded-full bg-green-500"}),"पहिले नाव"]}),(0,b.jsx)("input",{className:"w-full px-4 py-3 rounded-xl bg-gray-50 border-gray-300 border text-gray-900 placeholder-gray-500 focus:border-green-500 focus:ring-4 focus:ring-green-500/20 focus:outline-none focus:bg-white transition-all text-base font-medium",placeholder:"पहिले नाव टाका",value:i.firstName,onChange:a=>{console.log("[VerifyPage] First name input changed:",a.target.value),j({...i,firstName:a.target.value})}})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("label",{className:"text-sm font-bold text-gray-900 flex items-center gap-2",children:[(0,b.jsx)("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),"मधले नाव"]}),(0,b.jsx)("input",{className:"w-full px-4 py-3 rounded-xl bg-gray-50 border-gray-300 border text-gray-900 placeholder-gray-500 focus:border-blue-500 focus:ring-4 focus:ring-blue-500/20 focus:outline-none focus:bg-white transition-all text-base font-medium",placeholder:"मधले नाव टाका",value:i.middleName,onChange:a=>{console.log("[VerifyPage] Middle name input changed:",a.target.value),j({...i,middleName:a.target.value})}})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("label",{className:"text-sm font-bold text-gray-900 flex items-center gap-2",children:[(0,b.jsx)("span",{className:"w-2 h-2 rounded-full bg-purple-500"}),"आडनाव"]}),(0,b.jsx)("input",{className:"w-full px-4 py-3 rounded-xl bg-gray-50 border-gray-300 border text-gray-900 placeholder-gray-500 focus:border-purple-500 focus:ring-4 focus:ring-purple-500/20 focus:outline-none focus:bg-white transition-all text-base font-medium",placeholder:"आडनाव टाका",value:i.lastName,onChange:a=>{console.log("[VerifyPage] Last name input changed:",a.target.value),j({...i,lastName:a.target.value})}})]})]}),(0,b.jsxs)("button",{className:"w-full mt-6 px-6 py-4 rounded-xl bg-linear-to-r from-green-500 to-emerald-600 text-white text-base font-bold hover:from-green-600 hover:to-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-green-500/30 hover:shadow-xl hover:shadow-green-500/40 transition-all flex items-center justify-center gap-2 hover:scale-[1.02] active:scale-[0.98]",onClick:()=>{console.log("[VerifyPage] Search button clicked"),u()},disabled:a,children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),a?"शोधत आहे...":"शोधा"]})]}),a&&(0,b.jsx)(f,{label:"Searching for duplicates..."}),!a&&s&&(0,b.jsx)("div",{className:"glass rounded-lg p-3 border border-white/10",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-lg bg-blue-500/20 flex items-center justify-center",children:(0,b.jsx)("svg",{className:"w-4 h-4 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-slate-400",children:"शोध परिणाम"}),(0,b.jsxs)("p",{className:"text-lg font-bold text-white",children:[k.length," ",(k.length,"रेकॉर्ड")," सापडले"]})]})]})}),!a&&k.length>0&&(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(e,{records:k,verifiedSrNos:m,onSelectChange:a=>{console.log("[VerifyPage] Selection changed:",a),p(a)}}),(0,b.jsx)("div",{className:"glass rounded-lg p-4 border border-white/10",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-slate-400",children:"निवडलेले रेकॉर्ड"}),(0,b.jsxs)("p",{className:"text-base font-bold text-white",children:[o.length," रेकॉर्ड निवडले"]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)("button",{className:"px-4 py-2 rounded-lg bg-linear-to-r from-green-500 to-emerald-600 text-white text-sm font-semibold hover:from-green-600 hover:to-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed glow-hover shadow-lg transition-all flex items-center gap-2",onClick:()=>{console.log("[VerifyPage] Mark Duplicates button clicked"),v(!0)},disabled:a||0===o.length,children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"डुप्लिकेट म्हणून चिन्हांकित करा"]}),(0,b.jsxs)("button",{className:"px-4 py-2 rounded-lg bg-slate-700/50 border border-slate-600 text-white text-sm font-semibold hover:bg-slate-700 hover:border-slate-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center gap-2",onClick:()=>{console.log("[VerifyPage] Mark Not Duplicates button clicked"),v(!1)},disabled:a||0===o.length,children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"डुप्लिकेट नाही म्हणून चिन्हांकित करा"]})]})]})})]}),!a&&s&&0===k.length&&(0,b.jsxs)("div",{className:"glass rounded-xl p-8 border border-white/10 text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 rounded-full bg-slate-800 flex items-center justify-center mx-auto mb-3",children:(0,b.jsx)("svg",{className:"w-8 h-8 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-white mb-1",children:"परिणाम सापडले नाहीत"}),(0,b.jsx)("p",{className:"text-sm text-slate-400",children:"डुप्लिकेट रेकॉर्ड शोधण्यासाठी भिन्न शोध निकष वापरून पहा"})]}),q&&(0,b.jsx)(g,{message:q.message,type:q.type})]})}a.s(["default",()=>h],13016)}];

//# sourceMappingURL=src_app_%28verify%29_verify_page_tsx_39a3c36e._.js.map