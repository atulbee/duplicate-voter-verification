(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,74646,e=>{"use strict";var r=e.i(43476),t=e.i(71645);function a(){let[e,a]=(0,t.useState)({firstName:"",middleName:"",lastName:"",wardDivNo:"",epicNumber:"",voterSerialNo:"",sex:"",ageMin:"",ageMax:"",duplicateFlag:"",verified:"",sortBy:"SR_NO",sortDir:"ASC",pageNumber:1,pageSize:50}),[s,l]=(0,t.useState)(null),[o,i]=(0,t.useState)(!1),[d,n]=(0,t.useState)(null),c=async()=>{i(!0),n(null);try{let r={sortBy:e.sortBy,sortDir:e.sortDir,pageNumber:e.pageNumber,pageSize:e.pageSize};e.firstName.trim()&&(r.firstName=e.firstName.trim()),e.middleName.trim()&&(r.middleName=e.middleName.trim()),e.lastName.trim()&&(r.lastName=e.lastName.trim()),e.wardDivNo.trim()&&(r.wardDivNo=e.wardDivNo.trim()),e.epicNumber.trim()&&(r.epicNumber=e.epicNumber.trim()),e.voterSerialNo.trim()&&(r.voterSerialNo=e.voterSerialNo.trim()),e.sex&&(r.sex=e.sex),e.ageMin&&(r.ageMin=parseInt(e.ageMin)),e.ageMax&&(r.ageMax=parseInt(e.ageMax)),e.duplicateFlag&&(r.duplicateFlag=e.duplicateFlag),e.verified&&(r.verified=e.verified);let t=await fetch("/api/voters/report",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!t.ok)throw Error("Failed");l(await t.json())}catch(e){n(e.message||"Error occurred"),l(null)}finally{i(!1)}},x=e=>{a(r=>({...r,sortBy:e,sortDir:r.sortBy===e&&"ASC"===r.sortDir?"DESC":"ASC",pageNumber:1})),setTimeout(()=>c(),0)},g=({column:t})=>e.sortBy!==t?(0,r.jsx)("span",{className:"ml-1 text-gray-400",children:"⇅"}):"ASC"===e.sortDir?(0,r.jsx)("span",{className:"ml-1",children:"↑"}):(0,r.jsx)("span",{className:"ml-1",children:"↓"});return(0,r.jsxs)("div",{className:"space-y-6 max-w-[1600px] mx-auto p-4",children:[(0,r.jsx)("div",{className:"bg-white rounded-2xl p-6 border border-gray-200 shadow-sm",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"w-14 h-14 rounded-xl bg-linear-to-br from-indigo-500 to-purple-600 flex items-center justify-center shadow-xl shrink-0",children:(0,r.jsx)("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"मतदार अहवाल"}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:"Comprehensive Voter Report"})]})]})}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl p-6 border border-gray-200 shadow-sm",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Filters"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[(0,r.jsx)("input",{type:"text",placeholder:"First Name",value:e.firstName,onChange:e=>a(r=>({...r,firstName:e.target.value})),className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg text-gray-900"}),(0,r.jsx)("input",{type:"text",placeholder:"Middle Name",value:e.middleName,onChange:e=>a(r=>({...r,middleName:e.target.value})),className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg text-gray-900"}),(0,r.jsx)("input",{type:"text",placeholder:"Last Name",value:e.lastName,onChange:e=>a(r=>({...r,lastName:e.target.value})),className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg text-gray-900"}),(0,r.jsx)("input",{type:"text",placeholder:"Ward/Div No",value:e.wardDivNo,onChange:e=>a(r=>({...r,wardDivNo:e.target.value})),className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg text-gray-900"}),(0,r.jsx)("input",{type:"text",placeholder:"EPIC Number",value:e.epicNumber,onChange:e=>a(r=>({...r,epicNumber:e.target.value})),className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg text-gray-900"}),(0,r.jsx)("input",{type:"text",placeholder:"Serial No",value:e.voterSerialNo,onChange:e=>a(r=>({...r,voterSerialNo:e.target.value})),className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg text-gray-900"}),(0,r.jsxs)("select",{value:e.sex,onChange:e=>a(r=>({...r,sex:e.target.value})),className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg text-gray-900",children:[(0,r.jsx)("option",{value:"",children:"All Sex"}),(0,r.jsx)("option",{value:"M",children:"Male"}),(0,r.jsx)("option",{value:"F",children:"Female"}),(0,r.jsx)("option",{value:"O",children:"Other"})]}),(0,r.jsx)("input",{type:"number",placeholder:"Min Age",value:e.ageMin,onChange:e=>a(r=>({...r,ageMin:e.target.value})),className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg text-gray-900"}),(0,r.jsx)("input",{type:"number",placeholder:"Max Age",value:e.ageMax,onChange:e=>a(r=>({...r,ageMax:e.target.value})),className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg text-gray-900"}),(0,r.jsxs)("select",{value:e.duplicateFlag,onChange:e=>a(r=>({...r,duplicateFlag:e.target.value})),className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg text-gray-900",children:[(0,r.jsx)("option",{value:"",children:"All Duplicate"}),(0,r.jsx)("option",{value:"TRUE",children:"Duplicate"}),(0,r.jsx)("option",{value:"FALSE",children:"Not Duplicate"}),(0,r.jsx)("option",{value:"UNKNOWN",children:"Unknown"})]}),(0,r.jsxs)("select",{value:e.verified,onChange:e=>a(r=>({...r,verified:e.target.value})),className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg text-gray-900",children:[(0,r.jsx)("option",{value:"",children:"All Verified"}),(0,r.jsx)("option",{value:"TRUE",children:"Verified"}),(0,r.jsx)("option",{value:"FALSE",children:"Unverified"})]})]}),(0,r.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,r.jsx)("button",{onClick:c,disabled:o,className:"px-6 py-3 bg-linear-to-r from-indigo-600 to-purple-600 text-white rounded-lg font-semibold shadow-lg disabled:opacity-50",children:o?"Generating...":"Generate Report"}),(0,r.jsx)("button",{onClick:()=>{a({firstName:"",middleName:"",lastName:"",wardDivNo:"",epicNumber:"",voterSerialNo:"",sex:"",ageMin:"",ageMax:"",duplicateFlag:"",verified:"",sortBy:"SR_NO",sortDir:"ASC",pageNumber:1,pageSize:50}),l(null),n(null)},className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg font-semibold",children:"Clear"}),s?.voters?.length>0&&(0,r.jsx)("button",{onClick:()=>{if(!s?.voters?.length)return;let e=["Sr No,Ward/Div,First,Middle,Last,Age,Sex,EPIC,House,Duplicate,Verified,Dup ID",...s.voters.map(e=>[e.srNo,e.wardDivNo,e.firstName,e.middleName||"",e.lastName,e.age,e.sex,e.epicNumber,e.houseNo||"",e.duplicateFlag,e.verified,e.duplicationId||""].map(e=>`"${String(e).replace(/"/g,'""')}"`).join(","))].join("\n"),r=document.createElement("a");r.href=URL.createObjectURL(new Blob([e],{type:"text/csv"})),r.download=`report-${new Date().toISOString().split("T")[0]}.csv`,r.click()},className:"px-6 py-3 bg-linear-to-r from-green-600 to-emerald-600 text-white rounded-lg font-semibold shadow-lg",children:"Export CSV"})]})]}),d&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-300 rounded-xl p-4 text-red-700",children:d}),s&&(0,r.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden",children:[(0,r.jsxs)("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Results"}),(0,r.jsxs)("p",{className:"text-gray-600",children:["Total: ",s?.totalRecords||0," | Page ",s?.pageNumber||1,"/",s?.totalPages||1]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>{e.pageNumber>1&&(a(e=>({...e,pageNumber:e.pageNumber-1})),c())},disabled:1===e.pageNumber,className:"px-4 py-2 bg-gray-200 rounded-lg disabled:opacity-50",children:"Prev"}),(0,r.jsx)("button",{onClick:()=>{e.pageNumber<(s?.totalPages||1)&&(a(e=>({...e,pageNumber:e.pageNumber+1})),c())},disabled:e.pageNumber>=(s?.totalPages||1),className:"px-4 py-2 bg-gray-200 rounded-lg disabled:opacity-50",children:"Next"})]})]}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full border-collapse",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-linear-to-r from-gray-50 to-gray-100 border-b-2 border-gray-300",children:[(0,r.jsx)("th",{onClick:()=>x("SR_NO"),className:"px-4 py-4 text-left text-sm font-bold text-gray-800 border-r cursor-pointer hover:bg-gray-200 transition-colors",children:(0,r.jsxs)("div",{className:"flex items-center",children:["Sr No",(0,r.jsx)(g,{column:"SR_NO"})]})}),(0,r.jsx)("th",{onClick:()=>x("WARD_DIV_NO"),className:"px-4 py-4 text-left text-sm font-bold text-gray-800 border-r cursor-pointer hover:bg-gray-200 transition-colors",children:(0,r.jsxs)("div",{className:"flex items-center",children:["Ward/Div",(0,r.jsx)(g,{column:"WARD_DIV_NO"})]})}),(0,r.jsx)("th",{onClick:()=>x("FIRST_NAME"),className:"px-4 py-4 text-left text-sm font-bold text-gray-800 border-r cursor-pointer hover:bg-gray-200 transition-colors",children:(0,r.jsxs)("div",{className:"flex items-center",children:["First Name",(0,r.jsx)(g,{column:"FIRST_NAME"})]})}),(0,r.jsx)("th",{onClick:()=>x("MIDDLE_NAME"),className:"px-4 py-4 text-left text-sm font-bold text-gray-800 border-r cursor-pointer hover:bg-gray-200 transition-colors",children:(0,r.jsxs)("div",{className:"flex items-center",children:["Middle",(0,r.jsx)(g,{column:"MIDDLE_NAME"})]})}),(0,r.jsx)("th",{onClick:()=>x("LAST_NAME"),className:"px-4 py-4 text-left text-sm font-bold text-gray-800 border-r cursor-pointer hover:bg-gray-200 transition-colors",children:(0,r.jsxs)("div",{className:"flex items-center",children:["Last Name",(0,r.jsx)(g,{column:"LAST_NAME"})]})}),(0,r.jsx)("th",{onClick:()=>x("AGE"),className:"px-4 py-4 text-left text-sm font-bold text-gray-800 border-r cursor-pointer hover:bg-gray-200 transition-colors",children:(0,r.jsxs)("div",{className:"flex items-center",children:["Age",(0,r.jsx)(g,{column:"AGE"})]})}),(0,r.jsx)("th",{onClick:()=>x("SEX"),className:"px-4 py-4 text-left text-sm font-bold text-gray-800 border-r cursor-pointer hover:bg-gray-200 transition-colors",children:(0,r.jsxs)("div",{className:"flex items-center",children:["Sex",(0,r.jsx)(g,{column:"SEX"})]})}),(0,r.jsx)("th",{onClick:()=>x("EPIC_NUMBER"),className:"px-4 py-4 text-left text-sm font-bold text-gray-800 border-r cursor-pointer hover:bg-gray-200 transition-colors",children:(0,r.jsxs)("div",{className:"flex items-center",children:["EPIC",(0,r.jsx)(g,{column:"EPIC_NUMBER"})]})}),(0,r.jsx)("th",{onClick:()=>x("DUPLICATE_FLAG"),className:"px-4 py-4 text-left text-sm font-bold text-gray-800 border-r cursor-pointer hover:bg-gray-200 transition-colors",children:(0,r.jsxs)("div",{className:"flex items-center",children:["Duplicate",(0,r.jsx)(g,{column:"DUPLICATE_FLAG"})]})}),(0,r.jsx)("th",{onClick:()=>x("VERIFIED"),className:"px-4 py-4 text-left text-sm font-bold text-gray-800 cursor-pointer hover:bg-gray-200 transition-colors",children:(0,r.jsxs)("div",{className:"flex items-center",children:["Verified",(0,r.jsx)(g,{column:"VERIFIED"})]})})]})}),(0,r.jsx)("tbody",{children:s?.voters?.map((e,t)=>(0,r.jsxs)("tr",{className:`border-b ${t%2==0?"bg-gray-50":"bg-white"}`,children:[(0,r.jsx)("td",{className:"px-4 py-3 text-sm font-medium text-gray-900 border-r",children:e.srNo}),(0,r.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700 border-r",children:e.wardDivNo}),(0,r.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900 font-medium border-r",children:e.firstName}),(0,r.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700 border-r",children:e.middleName||"-"}),(0,r.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900 font-medium border-r",children:e.lastName}),(0,r.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700 border-r",children:e.age}),(0,r.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700 border-r",children:e.sex}),(0,r.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700 font-mono border-r",children:e.epicNumber}),(0,r.jsx)("td",{className:"px-4 py-3 text-sm border-r",children:(0,r.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${"TRUE"===e.duplicateFlag?"bg-red-100 text-red-800 ":"FALSE"===e.duplicateFlag?"bg-green-100 text-green-800 ":"bg-gray-100 text-gray-800 "}`,children:e.duplicateFlag})}),(0,r.jsx)("td",{className:"px-4 py-3 text-sm",children:(0,r.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${"TRUE"===e.verified?"bg-green-100 text-green-800 ":"bg-amber-100 text-amber-800 "}`,children:e.verified})})]},e.srNo))})]})})]})]})}e.s(["default",()=>a])}]);